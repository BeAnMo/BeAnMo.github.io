<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Nimiq Tip Jar</title><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:wght@500&family=IBM+Plex+Sans:wght@700&family=IBM+Plex+Mono&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><style>body{margin:0;padding:0;font-size:1.2rem;font-weight:500;font-family:IBM Plex Serif,serif;background-color:#fbfbfb;color:#444}h1,h2,h3,h4,h5,h6{font-family:IBM Plex Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;margin:1rem 0}p{margin:1rem 0}pre{background-color:#eee;padding:.5rem;width:100%;overflow:auto;line-height:1rem}code{font-family:IBM Plex Mono,monospace;color:#00a19c}a{color:#0083c1}a:hover{color:#00a19c;text-decoration-thickness:3px}a:active{color:#f98e2c}a:visited{color:#ce112d}</style><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="/assets/css/prism-theme.css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-178156821-2"></script><script>window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-178156821-2');</script></head><body><nav class="navbar"><h3><a href="/#about-me">Benjamin Morin</a></h3><div class="navbar-links"></div></nav><main class="container"><article class="content"><header><h1 style="margin-bottom: 0;">Nimiq Tip Jar</h1><h5 style="margin-top: 0;" class="lt-text">Wed Dec 23 2020</h5></header><section><div class="post-body"><p>Last week, the price of <a href="https://bitcoin.org/" target="_blank" rel="noopener">Bitcoin</a> blew past it's all time high previously set at the end of 2010. This time around I haven't encountered any stories of folks wasting their entire life savings or mortgaging their homes to buy as the price spikes, but rather I'm reading a lot more about corporations and banks getting there hands on it. This is a departure from threee years ago, where it seemed like every major news outlet was covering Bitcoin's rise. Now, all the press is limited to boring financial news outlets. Is that good or bad for tech that proudly promotes itself as decentralized? More importantly, what can you do with cryptocurrencies?</p><p>How about something simple? A digital tip jar. It's a way for a content creator to directly receive money from content consumers without harassing them with ads or relying on a company like Paypal.</p><hr><p>Final product A website owner should be able to add a script tag &amp; create an element with the id of &quot;tipjar&quot; and a data-address of whatever their Nimiq address is.</p><p><code>&lt;div id=&quot;tipjar&quot; data-address=&quot;&lt;somehash&gt;&quot;&gt;&lt;/div&gt;</code></p><p>Components:</p><ul><li>Button: a Nimiq-styled button that says &quot;Donate&quot; or &quot;Contribute&quot; or something.<ul><li>Button state can be<ul><li>init (base color, default text) (default)</li><li>loading (loading color, default text, loading indicator)</li><li>error (error color, error text, error icon)</li><li>success (success color, success text, success ico)</li></ul></li></ul></li><li>Card: The modal that contains the Form.<ul><li>Card state can be<ul><li>visible (default)</li><li>not visible</li><li>error message (optional)</li></ul></li></ul></li><li>Form: A form element that contains the sender's address, tip amount, &amp; memo(?).<ul><li>form state can be<ul><li>invalid (no tip amount or address given) (default)</li><li>valid</li></ul></li><li>When submitted<ol><li>set Button state as loading</li><li>set Card state as not visible</li><li>call api with form data</li><li>on response<ul><li>if success then set success Button state</li><li>otherwise set error Button state &amp; set Card error message</li></ul></li></ol></li></ul></li></ul><p>When the script loads:</p><ol><li>The Button element and hidden Card element are added to <code>#tipjar</code>.</li><li>When the button is clicked, the Card is overlayed, display a form.</li></ol><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> <span class="token constant">STYLE_CSS</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://cdn.jsdelivr.net/npm/@nimiq/style@v0.8.3/nimiq-style.min.css</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">var</span> <span class="token constant">FONT0</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://fonts.googleapis.com/css?family=Muli:400,600,700</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token keyword">var</span> <span class="token constant">FONT1</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://fonts.googleapis.com/css?family=Fira+Mono&amp;text=0123456789ABCDEFGHJKLMNPQRSTUVXY%20</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> <span class="token constant">STYLES</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">STYLE_CSS</span><span class="token punctuation">,</span> <span class="token constant">FONT0</span><span class="token punctuation">,</span> <span class="token constant">FONT1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">loadStyles</span><span class="token punctuation">(</span><span class="token parameter">href</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>  <span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span> <span class="token string">"link"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <br>  link<span class="token punctuation">.</span>href <span class="token operator">=</span> href<span class="token punctuation">;</span><br>  link<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"text/css"</span><span class="token punctuation">;</span><br>  link<span class="token punctuation">.</span>rel <span class="token operator">=</span> <span class="token string">"stylesheet"</span><span class="token punctuation">;</span><br>  link<span class="token punctuation">.</span>media <span class="token operator">=</span> <span class="token string">"screen,print"</span><span class="token punctuation">;</span><br><br>  document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span> <span class="token string">"head"</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">//STYLES.forEach(link => loadStyles(link));</span><br><br><br><span class="token keyword">var</span> Tipjar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>  <span class="token keyword">var</span> $wrapper <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tipjar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">var</span> $card <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tipjar-modal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">var</span> $btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'tipjar-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <br>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>$wrapper<span class="token punctuation">)</span><span class="token punctuation">{</span><br>    $wrapper <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    $wrapper<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'tipjar'</span><span class="token punctuation">;</span><br>    <br>    <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'Nimiq Tip Jar: Did not find #tipjar element.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <br>  $wrapper<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'relative'</span><span class="token punctuation">;</span><br>  <br>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>$btn<span class="token punctuation">)</span><span class="token punctuation">{</span><br>    $btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    $btn<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'tipjar-btn'</span><span class="token punctuation">;</span><br>    $btn<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token string">'button'</span><span class="token punctuation">;</span><br>    $btn<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'nq-button-pill gold inverse'</span><span class="token punctuation">;</span><br>    $btn<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Contribute?'</span><span class="token punctuation">;</span><br>    $wrapper<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$btn<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <br>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>$card<span class="token punctuation">)</span><span class="token punctuation">{</span><br>    $card <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'tipjar-modal'</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"nq-card"</span><br>    $card<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span>style<span class="token punctuation">.</span>zIndex <span class="token operator">=</span> <span class="token number">99</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'100px'</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'300px'</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">'-50px'</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">'-120px'</span><span class="token punctuation">;</span><br>    <br>    <span class="token keyword">var</span> $header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> $close <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    $close<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'&amp;#10006;'</span><span class="token punctuation">;</span><br>    <br>    $header<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"nq-card-header"</span><br>    $header<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span><br>    <br>    $header<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$close<span class="token punctuation">)</span><br><br>    <span class="token keyword">var</span> $body <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    $body<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"nq-card-body"</span><br>    $body<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> $footer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    $footer<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"nq-card-footer"</span><br>    $footer<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span><br><br>    $card<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$header<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$body<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    $card<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$footer<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    $wrapper<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$card<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br> <br>  <span class="token keyword">var</span> <span class="token function-variable function">toggleModal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> curr <span class="token operator">=</span> $card<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token punctuation">;</span><br>    <span class="token keyword">var</span> next <span class="token operator">=</span> curr <span class="token operator">===</span> <span class="token string">'none'</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">;</span><br><br>    $card<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> next<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <br>  $btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token function">toggleModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br></code></pre></div></section></article></main><footer class="container" style="height: 4rem;"><div class="content" style="display: flex; justify-content: space-between; align-items: baseline;"><a href="/">Back Home</a><h5>&copy; 2020 Benjamin Morin</h5></div></footer></body></html>